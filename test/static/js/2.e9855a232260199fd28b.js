webpackJsonp([2],{"+6ey":function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=s("Dd8w"),n=s.n(a),e=s("Z/1y"),c=s("j4eT"),o=s("iny2"),r=s("NYxO"),l={data:function(){return{show:{list:!1},playCar:""}},props:{m_id:{type:[Number,String]}},methods:{priceFn:function(t,i){i=i||"price";var s,a=t.specfoods[0][i];return a&&(s=a?a.toFixed(1).replace(/\.0$/,""):a),parseFloat(s)||0},countFn:function(t,i){var s="detail/"+(i?"add":"reduce");this.$store.commit(s,t)}},computed:n()({showList:function(){return!!this.count_all.num?this.show.list:this.show.list=!1},base_price:function(){return this.rst.piecewise_agent_fee.rules[0].price},priceSpread:function(){var t=this.base_price-this.count_all.price;return parseFloat(t.toFixed(1))}},Object(r.c)("detail",{count:function(t){return t.count[this.m_id]},classCount:function(t){return t.classCount[this.m_id]}}),Object(r.b)("detail",["rst"]),{count_all:function(){var t,i=0,s=0,a=0;for(var n in this.count)i+=(t=this.count[n]).count,s+=t.count*this.priceFn(t.item),a+=t.count*this.priceFn(t.item,"original_price")||s;return{num:i,price:s=parseFloat(s.toFixed(1)),price_origin:a=parseFloat(a.toFixed(1))}}}),watch:{count_all:function(t,i){var s=this;t.num>i.num&&(this.playCar="",setInterval(function(){s.playCar="car 0.3s"},100))}},mounted:function(){},components:{btnCount:o.a}},_={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return t.rst?s("div",{staticClass:"shoppingCarWrapper"},[s("div",{staticClass:"shoppingCar flex"},[s("div",{staticClass:"car_main flex"},[s("div",{staticClass:"car_icon",class:{car_icon_ok:t.count_all.num},style:{animation:t.playCar},on:{click:function(i){t.count_all.num&&(t.show.list=!t.show.list)}}},[s("b",{staticClass:"icon_count"},[t._v(t._s(t.count_all.num?t.count_all.num:""))]),t._v(" "),s("i",{staticClass:"iconfont icon-daohanggouwuche"})]),t._v(" "),s("div",{staticClass:"car_price"},[s("div",{staticClass:"price_top"},[t.count_all.price>=t.base_price?s("p",[s("span",{staticClass:"price symbol"},[t._v(t._s(t.count_all.price))]),t._v(" "),s("span",{staticClass:"origin_price symbol"},[t._v(t._s(t.count_all.price_origin))])]):s("p",{staticClass:"price_bottom"},[t._v("\n\t\t\t\t\t\t还不够吃~\n\t\t\t\t\t")])]),t._v(" "),s("p",[t._v(t._s(t.rst.piecewise_agent_fee.description))])])]),t._v(" "),s("div",{staticClass:"car_submit"},[t.priceSpread>0?s("div",{staticClass:"submit_base"},[t._v("还差"+t._s(t.priceSpread)+"元起送")]):s("div",{staticClass:"submit_ok"},[t._v("去结算")])])]),t._v(" "),s("transition",{attrs:{name:"list"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showList,expression:"showList"}],staticClass:"shoppingCar_list"},[s("p",{staticClass:"list_discountsMess"},[t._v("已减"+t._s((t.count_all.price_origin-t.count_all.price).toFixed(1))+"元")]),t._v(" "),s("div",{staticClass:"list_title flex"},[s("div",{staticClass:"title_name"},[s("span",[t._v("已选商品")])]),t._v(" "),s("div",{staticClass:"title_clear",on:{click:function(i){t.$store.commit("detail/clear",t.m_id)}}},[s("i",{staticClass:"iconfont icon-icon"}),t._v("清空\n\t\t\t")])]),t._v(" "),s("div",{staticClass:"list_wrapper"},[s("ul",{staticClass:"list_main"},t._l(t.count,function(i){return s("li",[s("div",{staticClass:"main_desc t_ellipsis"},[s("span",{staticClass:"desc_name"},[t._v(t._s(i.item.name))])]),t._v(" "),s("div",{staticClass:"main_price"},[s("span",{staticClass:"price_num symbol"},[t._v(t._s(t.priceFn(i.item)))]),t._v(" "),s("btnCount",{attrs:{count:i.count},on:{click:function(s){t.countFn({item:i.item,tid:i.tid},s)}}})],1)])}))])])])],1):t._e()},staticRenderFns:[]};var u=s("VU/8")(l,_,!1,function(t){s("fLpb")},null,null).exports,v=s("Pxfh"),d={data:function(){return{show:{desc:!1,coupon:!1,activity:!1},paths:v.a}},computed:n()({showShade:function(){var t=this.show;for(var i in t)if(t[i])return!0;return!1}},Object(r.c)({data_main:function(t){return t.detail.data}}),Object(r.b)("detail",["bought_list","menu","recommend","rst","redpack"]),{m_id:function(){return this.$route.query.id}}),methods:{},mounted:function(){var t=this,i="http://120.79.88.237:8080/api/detail?id="+this.m_id;this.$http.get(i).then(function(i){t.$store.commit("detail/setData",i.body)})},components:{vShade:e.a,activityList:c.a,ShoppingCar:u}},p={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return t.data_main&&t.rst?s("div",{staticClass:"detail"},[s("vShade",{attrs:{show:t.showShade}}),t._v(" "),s("header",{staticClass:"detail_header pink",style:{backgroundImage:"url("+t.$formatImgSrc(t.rst.shop_sign.image_hash,750,!0)+")"}},[s("router-link",{staticClass:"header_back",attrs:{to:t.paths.HOME}},[t._v("<")]),t._v(" "),s("div",{staticClass:"header_img blue"},[s("img",{attrs:{src:t.$formatImgSrc(t.rst.image_path,100)}})])],1),t._v(" "),s("div",{staticClass:"detail_desc"},[s("h2",{staticClass:"desc_name name_arror",on:{click:function(i){t.show.desc=!0}}},[t._v(t._s(t.rst.name))]),t._v(" "),s("div",{staticClass:"desc_rating",on:{click:function(i){t.show.desc=!0}}},[s("span",[t._v("评价"+t._s(t.rst.rating)+"分")]),t._v(" "),s("span",[t._v("月售"+t._s(t.rst.recent_order_num)+"单")]),t._v(" "),s("span",[t._v("配送约"+t._s(t.rst.order_lead_time)+"分钟")])]),t._v(" "),s("transition",{attrs:{name:"scale"}},[t.show.desc?s("div",{staticClass:"desc_more"},[s("h2",{staticClass:"desc_name"},[t._v(t._s(t.rst.name))]),t._v(" "),s("span",[t._v("评价"+t._s(t.rst.rating)+"分")]),t._v(" "),s("span",[t._v("月售"+t._s(t.rst.recent_order_num)+"单")]),t._v(" "),s("span",[t._v("配送约"+t._s(t.rst.order_lead_time)+"分钟")]),t._v(" "),s("div",[t._v("\n        "+t._s(t.rst.promotion_info)+"\n      ")]),t._v(" "),s("button",{staticClass:"more_btn",on:{click:function(i){t.show.desc=!1}}},[t._v("x")])]):t._e()]),t._v(" "),t.redpack.length?s("div",{staticClass:"desc_coupon"},[s("div",{staticClass:"coupon_main",on:{click:function(i){t.show.coupon=!0}}},t._l(t.redpack,function(i){return s("div",{staticClass:"coupon_item flex type0"},[s("span",{staticClass:"mian_value"},[t._v(t._s(i.value))]),t._v(" "),s("span",{staticClass:"mian_detail"},[t._v(t._s(i.title_detail))]),t._v(" "),s("span",{staticClass:"mian_btn"},[t._v("领取")])])})),t._v(" "),s("transition",{attrs:{name:"translate"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.show.coupon,expression:"show.coupon"}],staticClass:"coupon_detail detail_slide"},[s("div",{staticClass:"detail_title"},[t._v("店铺专享红包")]),t._v("\n        coupon_detail\n        "),s("button",{on:{click:function(i){t.show.coupon=!1}}},[t._v("XX")])])])],1):t._e(),t._v(" "),s("div",{staticClass:"desc_activity"},[s("div",{staticClass:"activity_main flex",on:{click:function(i){t.show.activity=!0}}},[s("activity-list",{staticClass:"grow_shrink",attrs:{data:[t.rst.activities[0]]}}),t._v(" "),s("div",{staticClass:"activity_more"},[t._v("共"+t._s(t.rst.activities.length)+"个优惠"),s("i",{staticClass:"iconfont icon-jiantouarrow486"})])],1),t._v(" "),s("transition",{attrs:{name:"translate"}},[t.show.activity?s("div",{staticClass:"activity_detail detail_slide"},[s("div",{staticClass:"detail_title"},[t._v("所有优惠")]),t._v(" "),s("button",{on:{click:function(i){t.show.activity=!1}}},[t._v("X")]),t._v(" "),s("activity-list",{staticClass:"detail_list",attrs:{data:t.rst.activities}})],1):t._e()])],1),t._v(" "),s("div",{staticClass:"desc_notice t_ellipsis"},[t._v("\n      公告： "+t._s(t.rst.promotion_info)+"\n    ")])],1),t._v(" "),s("div",{staticClass:"detail_main"},[s("nav",{directives:[{name:"fixed",rawName:"v-fixed"}],ref:"detail_nav",staticClass:"main_nav flex"},[s("div",{staticClass:"nav_item"},[s("router-link",{attrs:{to:t.paths.MENU}},[t._v("点餐")])],1),t._v(" "),s("div",{staticClass:"nav_item"},[s("router-link",{attrs:{to:t.paths.EVALUATE}},[t._v("评价")])],1),t._v(" "),s("div",{staticClass:"nav_item"},[s("router-link",{attrs:{to:t.paths.MERCHANT}},[t._v("商家")])],1)]),t._v(" "),s("router-view")],1),t._v(" "),s("ShoppingCar",{ref:"shoppingCar",attrs:{m_id:t.m_id}})],1):s("div",[t._v("\n  加载中 "),s("router-link",{attrs:{to:"/"}},[t._v("返回")])],1)},staticRenderFns:[]};var m=s("VU/8")(d,p,!1,function(t){s("me5H")},null,null);i.default=m.exports},Fn84:function(t,i){},HjGo:function(t,i){},ITvr:function(t,i){},"Z/1y":function(t,i,s){"use strict";var a={data:function(){return{}},props:{show:{type:Boolean,default:!0},bgColor:{type:String,default:"rgba(0,0,0,0.8)"},transitionName:{type:String,default:"shade"}}},n={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("transition",{attrs:{name:t.transitionName}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"shade",style:{backgroundColor:t.bgColor},on:{click:function(i){t.$emit("click")},mousewheel:function(t){t.preventDefault()},touchmove:function(t){t.preventDefault()}}},[t._t("default")],2)])},staticRenderFns:[]};var e=s("VU/8")(a,n,!1,function(t){s("HjGo")},null,null);i.a=e.exports},fLpb:function(t,i){},iny2:function(t,i,s){"use strict";var a={data:function(){return{}},props:{count:[Number,String],default:0}},n={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"btnCount flex"},[s("button",{staticClass:"iconfont icon-jian",class:{rotate_transition:t.count>0},on:{click:function(i){t.$emit("click",!1)}}}),t._v(" "),s("span",{staticClass:"num",style:{visibility:t.count>0?"visible":"hidden"}},[t._v(t._s(t.count))]),t._v(" "),s("button",{staticClass:"iconfont icon-jia",on:{click:function(i){t.$emit("click",!0)}}})])},staticRenderFns:[]};var e=s("VU/8")(a,n,!1,function(t){s("ITvr")},null,null);i.a=e.exports},j4eT:function(t,i,s){"use strict";var a={data:function(){return{}},props:{data:Array,default:function(){return[]}}},n={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("ul",t._l(t.data,function(i){return s("li",{staticClass:"activity_item"},[s("i",{staticClass:"icon",style:{backgroundColor:"#"+i.icon_color}},[t._v(t._s(i.icon_name))]),t._v(t._s(i.description)+"\r\n\t")])}))},staticRenderFns:[]};var e=s("VU/8")(a,n,!1,function(t){s("Fn84")},null,null);i.a=e.exports},me5H:function(t,i){}});