webpackJsonp([3],{"1mig":function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n=i("Dd8w"),e=i.n(n),a=i("NYxO"),c=i("iny2"),l={data:function(){return{menuIndex:0,hs:[],dMainCon:null,topOff:!0}},props:{},methods:{countFn:function(t,s){var i="detail/"+(s?"add":"reduce");this.$store.commit(i,t)},hasNum:function(t){var s=this.count[t.restaurant_id];t=s&&s[t.item_id];return s&&t?t.count:0},price:function(t,s){s=s||"price";var i,n=t.specfoods[0][s];if(n)return i=n?n.toFixed(1).replace(/\.0$/,""):n,i},menuScroll:function(t){var s=this.dMainCon,i=s.getElementsByClassName("slideWrap")[0];this.topOff&&(this.topOff=!1,this.$top(0,s)),this.scrollOff=!1;var n,e=500;e*=this.dMainCon.scrollTop<(n=this.hs[t])?1:-1,s.scrollTop=n,i.style.transform="translateY("+e+"px)",i.style.transition="",this.menuIndex=t,setTimeout(function(){i.style.transition="0.5s ease-out",i.style.transform="translateY(0px)"},20)}},watch:{},computed:e()({},Object(a.c)("detail",["data","count","classCount"]),Object(a.b)("detail",["recommend","menu","rst"])),mounted:function(){var t=this,s=this.$refs.menu_main,i=s.getElementsByClassName("main_con")[0],n=i.getElementsByClassName("con_item"),e=(s.getElementsByClassName("class_item"),this.$parent.$refs.detail_nav),a=0;this.$nextTick(function(){a=getComputedStyle(t.$parent.$el).paddingBottom;var i=e.offsetHeight+parseFloat(a),n=document.documentElement.clientHeight||document.body.clientHeight;s.style.height=n-i+"px"}),function(){var s,e=[],a=0,c=0,l=0;t.dMainCon=i;var o=!0;i.addEventListener("scroll",function(){if(o){for(var r,_=0;r=n[_++];)e.push(r.offsetTop);a=e.length,t.hs=e,o=!1}0===l&&t.$top(0,t.dMainCon),l=function(){c=i.scrollTop;for(var t,s=0;t=e[s],s<a;s++)if(t>c)return s-1}(),s!==l&&(t.menuIndex=l,s=l)},!1)}()},components:{btnCount:c.a}},o={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"menu"},[t.recommend?i("div",{staticClass:"menu_recommend"},[i("h3",{staticClass:"recommend_title"},[t._v(t._s(t.recommend.name))]),t._v(" "),i("div",{staticClass:"recommend_view"},[i("ul",{staticClass:"view_slide flex"},t._l(t.recommend.items,function(s){return i("li",{staticClass:"slide_item"},[i("img",{staticClass:"item_img",attrs:{src:t.$formatImgSrc(s.image_path,160,!0)}}),t._v(" "),i("p",{staticClass:"item_name t_ellipsis"},[t._v(t._s(s.name))]),t._v(" "),i("p",{staticClass:"item_rating"},[i("span",[t._v("月售"+t._s(s.month_sales))]),t._v(" "),i("span",[t._v("好评率"+t._s(s.satisfy_rate)+"%")])]),t._v(" "),i("div",{staticClass:"item_count flex"},[i("span",{staticClass:"count_price"},[t._v(t._s(t.price(s)))]),t._v(" "),i("btnCount",{attrs:{count:t.hasNum(s)},on:{click:function(i){t.countFn({item:s,tid:"recommend"},i)}}})],1)])}))])]):t._e(),t._v(" "),i("div",{ref:"menu_main",staticClass:"menu_main flex"},[i("ul",{staticClass:"main_class"},t._l(t.menu,function(s,n){return i("li",{key:n,staticClass:"class_item",class:{class_active:n===t.menuIndex},on:{click:function(s){t.menuScroll(n)}}},[i("p",[s.icon_url?i("img",{attrs:{src:t.$formatImgSrc(s.icon_url,18),alt:""}}):t._e(),i("span",[t._v(t._s(s.name))])]),t._v(" "),t.classCount[t.rst.id]&&t.classCount[t.rst.id][s.id]?i("span",{staticClass:"item_countClass"},[t._v(t._s(t.classCount[t.rst.id][s.id]))]):t._e()])})),t._v(" "),i("div",{staticClass:"main_con grow_shrink"},[i("div",{staticClass:"slideWrap"},t._l(t.menu,function(s){return i("dl",{key:s.id,staticClass:"con_item"},[i("dt",{staticClass:"item_title"},[i("span",{staticClass:"title_main"},[t._v(t._s(s.name))]),t._v(" "),i("span",{staticClass:"title_desc"},[t._v(t._s(s.description))])]),t._v(" "),t._l(s.foods,function(n){return i("dd",{key:n.item_id,staticClass:"item_desc flex"},[i("img",{staticClass:"desc_img",attrs:{src:t.$formatImgSrc(n.image_path,128),alt:""}}),t._v(" "),i("div",{staticClass:"desc_main"},[i("h3",{staticClass:"main_name t_ellipsis"},[t._v(t._s(n.name))]),t._v(" "),i("p",{staticClass:"main_rating  t_ellipsis"},[i("span",[t._v("月售"+t._s(n.month_sales)+"份")]),t._v(" "),i("span",[t._v("好评率"+t._s(n.satisfy_rate)+"%")])]),t._v(" "),n.activity?i("p",{staticClass:"main_discount"},[i("span",{staticClass:"discount_icon"},[t._v(t._s(n.activity.benefit_text))]),t._v(" "),i("span",[t._v(t._s(n.activity.name))])]):t._e(),t._v(" "),i("div",{staticClass:"main_btn flex"},[i("div",{staticClass:"btn_price"},[i("span",{staticClass:"price"},[t._v(t._s(t.price(n)))]),t._v(" "),t.price(n,"original_price")?i("span",{staticClass:"originPrice"},[t._v(t._s(t.price(n,"original_price")))]):t._e()]),t._v(" "),i("btnCount",{attrs:{count:t.hasNum(n)},on:{click:function(i){t.countFn({item:n,tid:s.id},i)}}})],1)])])})],2)}))])])])},staticRenderFns:[]};var r=i("VU/8")(l,o,!1,function(t){i("5tWR")},null,null);s.default=r.exports},"5tWR":function(t,s){},ITvr:function(t,s){},iny2:function(t,s,i){"use strict";var n={data:function(){return{}},props:{count:[Number,String],default:0}},e={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"btnCount flex"},[i("button",{staticClass:"iconfont icon-jian",class:{rotate_transition:t.count>0},on:{click:function(s){t.$emit("click",!1)}}}),t._v(" "),i("span",{staticClass:"num",style:{visibility:t.count>0?"visible":"hidden"}},[t._v(t._s(t.count))]),t._v(" "),i("button",{staticClass:"iconfont icon-jia",on:{click:function(s){t.$emit("click",!0)}}})])},staticRenderFns:[]};var a=i("VU/8")(n,e,!1,function(t){i("ITvr")},null,null);s.a=a.exports}});